# CRUD-операции по паттерну "Репозиторий"

Реализация бэкенда с REST API, выполняющего CRUD-операции по связанным таблицам Автор, Книга. 
Описана миграция на чистом SQL, создающая и наполняющая таблицы в БД.
С применением паттерна "Репозиторий" описаны CRUD-операции по сущностям в базе данных на чистом SQL.
Реализованы запросы:

1) GET - возвращает JSON со списком автором и вложенной информацией о его книгах.
Дополнительно можно указать лимит записей, а также добавить фильтрацию по имени автора и его стране.
2) POST - создает автора со списком его книг.
3) PUT - обновляет информацию по автору и его книгах. 
4) DELETE - удаляет автора со всеми его книгами. + DELETE для удаления книг отдельно.


## Используемые технологии
Бэкенд: python3.10, asyncio, FastApi, SQLAlchemy Core

СУБД: PostgreSQL

Линтеры: isort, flake8

## Настройка проекта

Проект настраивается через переменные окружения, указанные в файле src/.env

Пример .env файла указан в .env.example:

| Ключ                | Значение                           | По умолчанию      |
|---------------------|------------------------------------|-------------------|
| `APP_HOST`          | Хост приложения                    | `0.0.0.0`         |
| `APP_PORT`          | Порт приложения                    | `8000`            |
| `APP_WORKERS`       | Количество воркеров                | `2`               |
| `DEBUG`             | Режим дебага                       | `False`           |
| `RELOAD`            | Режим автоперезагрузки             | `False`           |
| `POSTGRES_DB`       | Имя БД                             | `app`             |
| `POSTGRES_USER`     | Пользователь БД                    | `postgres`        |
| `POSTGRES_PASSWORD` | Пароль пользователя БД             | `postgres`        |
| `POSTGRES_HOST`     | Адрес СУБД                         | `db`              |
| `POSTGRES_PORT`     | Порт СУБД                          | `5432`            |
| `STATIC_PATH`       | Путь до статических файлов         | `/project/static` |
| `APP_PROXY_PORT`    | Порт контейнера с бэкендом         | `8000`            |
| `APP_PROXY_LINK`    | Наименование контейнера с бэкендом | `app`             |


## Запуск проекта:

В корне проекта запустить команду:

`docker-compose -f docker-compose.yml up --build -d`

Доступ к сваггеру по адресу: `127.0.0.1:8000/docs`

